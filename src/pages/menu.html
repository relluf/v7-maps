<template><div class="page">
	<div class="navbar">
	    <div class="navbar-inner">
	        <div class="left sliding">
	            <!--<a class="link reload">Reload</a>-->
	        </div>
	        <div class="center sliding title">Veldapps</div>
	        <div class="right">
	            <!--<a class="link close">-->
	            <!--	<i class="icon icon-forward" style="_pointer-events: none;"></i>-->
	            <!--</a>-->
	        </div>
	    </div>
	</div>
	<div class="page-content hide-navbar-on-scroll infinite-scroll-content_">
		<div class="block center"></div>
		<div class="center">
			<div class="title">
				<a href="/session">
					<i class="fa fa-user-circle"></i>
				</a>
			</div>
			<div class="subtitle">{{User.name}}</div>
			<span>{{User.company}}</span>
		</div>

		<div class="block-title">{{l "Shortcuts"}}</div>
		<div class="button-block">
			<a href="" class="button button-big button-round button-new bodemlaag flex3">
				<i class="fa fa-plus"></i>{{l "Meetpunt-bodemlagen/New.button"}}</a>
			<a href="pages/new/Bodemmonster.page/.html" class="button button-big button-round button-new bodemmonster flex4"><i class="fa fa-plus"></i>{{l "Meetpunt-bodemmonsters/New.button"}}</a>
			<a href="pages/new/Filter.page/.html" class="button button-big button-round button-new filter flex2"><i class="fa fa-plus"></i>{{l "Meetpunt-filters/New.button"}}</a>
		</div>		
		<div class="button-block">
			<a href="" class="button button-big button-round button-new foto flex1">
				<i class="fa fa-plus"></i>{{l "Foto/New.button"}}</a>
			<a href="pages/new/Bodemmonster.page/.html" class="button button-big button-round button-new meetpunt flex1"><i class="fa fa-plus"></i>{{l "Meetpunt/New.button"}}</a>
		</div>		
		
		<div class="block-title">{{l "Collections"}}</div>
		<div class="list"><ul>
			<li><a href="/investigations" class="item-content item-link">
				<div class="item-media">
					<i class="fa fa-fw fa-street-view menu-icon bg-color-green "></i>
				</div>
				<div class="item-inner">
					<div class="item-title-row">
						<div class="item-title">{{l "Onderzoek.plural"}}</div>
					</div>
					<div class="count-onderzoeken item-after">&nbsp;</div>
				</div>
			</a></li>
			<li><a href="/mlocations" class="item-content item-link">
				<div class="item-media">
					<i class="fa fa-fw fa-map-marker menu-icon bg-color-green "></i>
				</div>
				<div class="item-inner">
					<div class="item-title-row">
						<div class="item-title">{{l "Meetpunt.plural"}}</div>
					</div>
					<div class="count-onderzoeken item-after">&nbsp;</div>
				</div>
			</a></li>
			<li><a data-page="/photos" class="item-content item-link">
				<div class="item-media">
					<i class="fa fa-fw fa-photo menu-icon bg-color-green "></i>
				</div>
				<div class="item-inner">
					<div class="item-title-row">
						<div class="item-title">{{l "Foto.plural"}}</div>
					</div>
				</div>
			</a></li>
		</ul></div>
		
		<div class="block-title">{{l "Settings"}}</div>
		<div class="list"><ul>
			<li><a href="/settings/language" class="item-content item-link">
				<div class="item-media">
					<i class="fa fa-fw fa-globe menu-icon bg-color-blue"></i>
				</div>
				<div class="item-inner">
					<div class="item-title">{{l "Language"}}</div>
					<div class="item-after">{{js "window.locale('Language.' + locale.loc)"}}</div>
				</div>
			</a></li>
		</ul></div>
	
		<div class="block-title">{{l "Stream"}}</div>
		<div class="list stream"></div>
		<div class="infinite-scroll-preloader preloader preloader-big"></div>

		<div style="display:none;">
			<div class="stream">
				
			</div>
			
			<div class="map-settings list item-title-full-width"><ul>
				<li><div class="item-content">
					<div class="item-media">
						<i class="fa fa-table fa-fw menu-icon bg-green"></i>
					</div>
					<div class="item-inner">
						<div class="item-title label">{{l "Map-grid.switch"}}</div>
						<div class="item-input map-grid">
							<label class="label-switch" style="float:right;">
								<input type="checkbox">
								<div class="checkbox"></div>
							</label>
						</div>
					</div>
				</div></li>
				<li><div class="item-content">
					<div class="item-media">
						<i class="fa fa-bars fa-fw menu-icon bg-green"></i>
					</div>
					<div class="item-inner">
						<div class="item-title label">{{l "Map-menuHandle.switch"}}</div>
						<div class="item-input map-left-page-handle">
							<label class="label-switch" style="float:right;">
								<input type="checkbox">
								<div class="checkbox"></div>
							</label>
						</div>
					</div>
				</div></li>
				<li><div class="item-content">
					<div class="item-media">
						<i class="fa fa-cogs fa-fw menu-icon bg-green"></i>
					</div>
					<div class="item-inner">
						<div class="item-title label">{{l "Map-retina.switch"}}<div class="item-subtitle">{{l "RestartRequiredUponChange"}}</div></div>
						<div class="item-input map-retina">
							<label class="label-switch" style="float:right;">
								<input type="checkbox">
								<div class="checkbox"></div>
							</label>
						</div>
					</div>
				</div></li>
			</ul></div>
			<div class="block-title"><span class="build"></span></div>
			<div class="other-settings list"><ul>
				<li><a data-page="util/entities/Model" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-database menu-icon bg-blue "></i>
					</div>
					<div class="item-inner">
						<div class="item-title-row">
							<div class="item-title">{{l "Model.plural"}}</div>
						</div>
					</div>
				</a></li>
				<li class='photolibrary'><a data-page="util/photos/Library" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-photo menu-icon bg-blue "></i>
					</div>
					<div class="item-inner">
						<div class="item-title-row">
							<div class="item-title">{{l "Foto.plural"}}</div>
						</div>
					</div>
				</a></li>
				<!--<li><div class="item-content">-->
				<!--	<div class="item-media">-->
				<!--		<i class="fa fa-fw fa-window-minimize menu-icon bg-blue"></i>-->
				<!--	</div>-->
				<!--	<div class="item-inner">-->
				<!--		<div class="item-title label">{{l "Statusbar"}}<div class="item-subtitle"></div></div>-->
				<!--		<div class="item-input statusbar">-->
				<!--			<label class="label-switch" style="float:right;">-->
				<!--				<input type="checkbox" checked>-->
				<!--				<div class="checkbox"></div>-->
				<!--			</label>-->
				<!--		</div>-->
				<!--	</div>-->
				<!--</div></li>-->
			</ul></div>
			<div class="block-title">{{l "Setting/location.header"}}</div>
			<div class="list item-after-shrink"><ul>
				<li><a href="/settings/location/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-map-signs menu-icon bg-color-yellow "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">{{l "Setting/location.label"}}</div>
						<div id="Modem-location" class="item-after">{{Modem.location()}}</div>
					</div>
				</a></li>
			</ul></div>
	
			<div class="block-title">{{l "Interval.plural"}}</div>
			<div class="list item-after-shrink"><ul>
				<li><a href="/settings/interval/send/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-send-o menu-icon bg-color-blue "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">
							{{l "Setting/sendinterval"}}
							<!--<div class="item-footer requested">Requested: Once a day</div>-->
						</div>
						<div id="Modem-sendinterval" class="item-after">{{Modem.sendinterval()}}</div>
					</div>
				</a></li>
				<li><a href="/settings/interval/wakeup/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-bell-o menu-icon bg-color-blue "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">{{l "Setting/wakeupinterval"}}</div>
						<div id="Modem-wakeupinterval" class="item-after">{{Modem.wakeupinterval()}}</div>
					</div>
				</a></li>
				<li><a href="/settings/interval/barolog/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-bold menu-icon bg-color-blue "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">{{l "Setting/barologinterval"}}</div>
						<div id="Modem-barologinterval" class="item-after">{{Modem.barologinterval()}}</div>
					</div>
				</a></li>
				<li><a href="/settings/interval/sample/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-bold menu-icon bg-color-blue "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">{{l "Setting/sampleinterval"}}</div>
						<div id="Modem-sampleinterval" class="item-after">{{Modem.sampleinterval()}}</div>
					</div>
				</a></li>
			</ul></div>
			
			<div class="block-title">{{l "Setting/allportsic.header"}}</div>
			<div class="list item-after-shrink"><ul>
				<li><a href="/settings/allportsic/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-line-chart menu-icon bg-color-pink "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">{{l "Setting/allportsic.label"}}</div>
						<div id="Modem-allportsic" class="item-after">{{Modem.allportsic()}}</div>
					</div>
				</a></li>
			</ul></div>
			
			<div class="block-title">{{l "Setting/email.plural"}}</div>
			<div class="list item-after-shrink"><ul>
				<li><a href="/settings/emailaddress/1/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-vcard menu-icon bg-color-orange "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">{{l "Setting/emailaddress1"}}</div>
						<div id="Modem-emailaddress1" class="item-after">{{Modem.emailaddress1()}}</div>
					</div>
				</a></li>
				<li><a href="/settings/emailaddress/2/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-vcard-o menu-icon bg-color-orange "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">{{l "Setting/emailaddress2"}}</div>
						<div id="Modem-emailaddress2" class="item-after">{{Modem.emailaddress2()}}</div>
					</div>
				</a></li>
				<li><a href="/settings/emailaddress/3/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-vcard menu-icon bg-color-orange "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">{{l "Setting/emailaddress3"}}</div>
						<div id="Modem-emailaddress3" class="item-after">{{Modem.emailaddress3()}}</div>
					</div>
				</a></li>
				<li><a href="/settings/emailaddress/4/" class="item-content item-link">
					<div class="item-media">
						<i class="fa fa-fw fa-at menu-icon bg-color-orange "></i>
					</div>
					<div class="item-inner">
						<div class="item-title">{{l "Setting/emailaddress4"}}</div>
						<div id="Modem-emailaddress4" class="item-after">{{Modem.emailaddress4()}}</div>
					</div>
				</a></li>
			</ul></div>
	
			<div class="block hidden">
				<div class="center">{{l "Modem-hardwareVersion"}}: {{hardwareversion}}</div>
				<div class="center">{{l "Modem-softwareVersion"}}: {{softwareversion}}</div>
			</div>
	
			<div class="button-block" style="margin-bottom:50px;">
				<a class="button button-big button-round submit-changes2">{{l "Apply"}}</a>
				<a class="button button-big button-round revert">{{l "Revert"}}</a>
			</div>
		</div>
	
	</div>
</div></template>

<style></style>

<script>
	var Session = require("veldoffice/Session");
	var Framework7 = require("framework7");
	var EM = require("veldoffice/EM");

	function bind(target, Handlers) {
		var f, name;
		for(var selector in Handlers) {
			f = Handlers[selector];
			selector = selector.split(" ");
			name = selector.pop();
			$(selector.join(" "), target).on(name, f);
		}
	}
		
		

	return { 
		data: function() { 
			var info = Session.info_;
			var Modem = {};
			["serial", "type", "location", "currentbattery", "ext_eswsensor", "battery", "ext_eswsensor", "location", "sendinterval", "wakeupinterval", "barologinterval", "sampleinterval", "allportsic", "emailaddress1", "emailaddress2", "emailaddress3", "emailaddress4"].forEach(key => Modem[key] = (function() { return key; }));
			return {
				User: { name: info.name, company: info.bedrijf.naam },
				Modem: Modem
			}
		},
		on: {
			pageInit(e) {
				bind(e.target, {
					".link.logout click": function() {
						new Framework7.Dialog(f7a, {
							title: locale("Confirm"),
							text: locale("AreYouSureToLogout"),
							buttons: [{
								text: locale("No"),
								keyCodes: [27]
							}, {
								text: locale("Yes"),
								bold: true,
								keyCodes: [13],
								onClick: function() {
									Session.logout();
									window.location.reload();
								}
							}],
							destroyOnClose: true
						}).open();
					},
					
					".page-content infinite": function() {
						console.log("infinite", { 'this': this, args: arguments });
					}
				});
			},
			
			pageBeforeIn() {
			}
			
		}
	};
	
</script>